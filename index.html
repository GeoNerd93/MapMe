<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>MapMe â€“ World Atlas</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <link
  rel="stylesheet"
  href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"
/>


  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    header {
      padding: 15px;
      background: #1f3a8a;
      color: white;
      text-align: center;
    }
    #map {
      height: 85vh;
      width: 100%;
    }
    footer {
      text-align: center;
      padding: 8px;
      font-size: 14px;
      background: #f1f1f1;
    }

#sidePanel {
  position: fixed;
  top: 140px;
  right: 10px;
  width: 220px;
  background: white;
  padding: 12px 14px;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  font-size: 14px;
  z-index: 1000;
  display: none;
}

#sidePanel h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  text-align: center;
  border-bottom: 1px solid #ddd;
  padding-bottom: 6px;
}

.layer-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.layer-item input {
  transform: scale(1.1);
  cursor: pointer;
}

.layer-item span {
  white-space: nowrap;
}
  #layerToggleBtn {
  position: fixed;
  top: 140px;
  right: 10px;
  background: #1f3a8a;
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  z-index: 1001;
}


  </style>
</head>

<body>

<header>
  <h1>ğŸŒ MapMe â€“ Interactive World Atlas</h1>
  <p>Pan â€¢ Zoom â€¢ Explore the World</p>
</header>

<div id="map"></div>

  <div id="layerToggleBtn">ğŸ§­ Layers</div>


 <div id="sidePanel">
  <h3>Layers</h3>

<div class="layer-item">
  <input type="checkbox" id="chkCountries" checked>
  <span>ğŸŒ Countries</span>
</div>


  <div class="layer-item">
    <input type="checkbox" id="chkRivers" checked>
    <span>ğŸŒŠ Rivers</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkBiosphere" checked>
    <span>ğŸŒ± Biosphere</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkProtected" checked>
    <span>ğŸ¦Œ Protected Areas</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkClimate" checked>
    <span>ğŸŒ Climate Zones</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkSoil" checked>
    <span>ğŸŒ± Soil Types</span>
  </div>

<div class="layer-item">
  <input type="checkbox" id="chkKoppen">
  <span>ğŸŒ¦ï¸ KÃ¶ppen Climate</span>
</div>


   
   
</div>



<footer>
  OpenStreetMap data | Leaflet.js | MapMe
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
 <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
 

<!--<script>
  // Create the map
  var map = L.map('map').setView([20, 0], 2);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);
</script>-->

  <script>
  // Create the map
  var map = L.map('map').setView([20, 0], 2);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  // -------- RIVERS LAYER --------

  // -------- RIVERS LAYER (NATURAL EARTH) --------

var rivers = L.geoJSON(null, {
  style: {
    color: 'blue',
    weight: 1.5
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup("ğŸŒŠ River: " + feature.properties.name);
    }
  }
}).addTo(map);

fetch('data/ne_50m_rivers.geojson')
  .then(response => response.json())
  .then(data => {
    rivers.addData(data);
  })
  .catch(err => console.error("Failed to load rivers:", err));


  
  // Layer control

    // -------- COUNTRIES LAYER (NATURAL EARTH) --------

var countries = L.geoJSON(null, {
  style: {
    color: '#6b7280',
    weight: 1,
    fillColor: '#e5e7eb',
    fillOpacity: 0.2
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.ADMIN) {
      layer.bindPopup("ğŸŒ Country: " + feature.properties.ADMIN);
    }
  }
}).addTo(map);

fetch('data/ne_50m_countries.geojson')
  .then(res => res.json())
  .then(data => countries.addData(data))
  .catch(err => console.error("Failed to load countries:", err));

     // Layer control

      // -------- BIOSPHERE RESERVES LAYER --------
// -------- BIOSPHERE RESERVES (UNESCO) --------

// -------- BIOSPHERE RESERVES (UNESCO) --------

var biospheres = L.geoJSON(null, {
  pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, {
      radius: 6,
      fillColor: '#22c55e',
      color: '#166534',
      weight: 1,
      fillOpacity: 0.8
    });
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup(
        "ğŸŒ± Biosphere Reserve<br><strong>" +
        feature.properties.name +
        "</strong>"
      );
    }
  }
}).addTo(map);

fetch('data/ne_10m_biosphere.geojson')
  .then(res => res.json())
  .then(data => biospheres.addData(data))
  .catch(err => console.error("Failed to load biospheres:", err));


     // Layer control


      // -------- PROTECTED AREAS / SANCTUARIES --------

 // -------- PROTECTED AREAS (GLOBAL POINTS â€“ NATURAL EARTH) --------

var protectedAreas = L.geoJSON(null, {
  pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, {
      radius: 4,
      fillColor: '#16a34a',
      color: '#064e3b',
      weight: 1,
      fillOpacity: 0.75
    });
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup(
        "ğŸ¦Œ Protected Area<br><strong>" +
        feature.properties.name +
        "</strong>"
      );
    }
  }
}).addTo(map);

fetch('data/ne_10m_protected_areas_points.geojson')
  .then(res => res.json())
  .then(data => protectedAreas.addData(data))
  .catch(err => console.error("Failed to load protected areas:", err));


         // Layer control

// -------- KÃ–PPEN CLIMATE (MAJOR ZONES - LOCAL) --------

var koppenClimate = L.geoJSON(null, {
  style: function (feature) {
    const g = feature.properties.group;
    return {
      color: '#374151',
      weight: 0.5,
      fillColor:
        g === 'A' ? '#16a34a' :   // Tropical
        g === 'B' ? '#eab308' :   // Dry
        g === 'C' ? '#22c55e' :   // Temperate
        g === 'D' ? '#3b82f6' :   // Continental
        g === 'E' ? '#e5e7eb' :   // Polar
        '#d1d5db',
      fillOpacity: 0.35
    };
  },
  onEachFeature: function (feature, layer) {
    layer.bindPopup(
      "ğŸŒ¦ï¸ KÃ¶ppen Climate<br><strong>" +
      feature.properties.name +
      "</strong>"
    );
  }
});

fetch('data/koppen_major_zones.geojson')
  .then(res => res.json())
  .then(data => koppenClimate.addData(data))
  .catch(err => console.error("KÃ¶ppen load error:", err));

// Layer control


      // -------- CLIMATE ZONES (SIMPLIFIED) --------

  var climateZones = L.layerGroup();

  // Tropical Climate
  L.rectangle([[-23.5, -180], [23.5, 180]], {
    color: '#16a34a',
    weight: 1,
    fillOpacity: 0.15
  })
  .bindPopup("ğŸŒ´ Tropical Climate Zone")
  .addTo(climateZones);

  // Desert / Arid Climate (approximate regions)
  L.rectangle([[15, -30], [35, 60]], {
    color: '#eab308',
    weight: 1,
    fillOpacity: 0.2
  })
  .bindPopup("ğŸœï¸ Desert / Arid Climate")
  .addTo(climateZones);

  // Temperate Climate (Northern Hemisphere mid-latitudes)
  L.rectangle([[35, -180], [60, 180]], {
    color: '#3b82f6',
    weight: 1,
    fillOpacity: 0.15
  })
  .bindPopup("ğŸŒ¦ï¸ Temperate Climate Zone")
  .addTo(climateZones);

  // Polar Climate
  L.rectangle([[66.5, -180], [90, 180]], {
    color: '#e5e7eb',
    weight: 1,
    fillOpacity: 0.4
  })
  .bindPopup("â„ï¸ Polar Climate Zone")
  .addTo(climateZones);

  // -------- SOIL TYPES (SIMPLIFIED) --------

  var soilTypes = L.layerGroup();

  // Alluvial Soil (Indo-Gangetic Plains)
  L.rectangle([[22, 72], [32, 90]], {
    color: '#a16207',
    weight: 1,
    fillOpacity: 0.25
  })
  .bindPopup("ğŸŒ¾ Alluvial Soil (Indo-Gangetic Plains)")
  .addTo(soilTypes);

  // Black Soil (Deccan Plateau)
  L.rectangle([[16, 72], [24, 82]], {
    color: '#1f2937',
    weight: 1,
    fillOpacity: 0.25
  })
  .bindPopup("âš« Black Soil (Regur â€“ Deccan Plateau)")
  .addTo(soilTypes);

  // Laterite Soil (Western Ghats & Eastern Ghats)
  L.rectangle([[8, 73], [15, 80]], {
    color: '#b45309',
    weight: 1,
    fillOpacity: 0.25
  })
  .bindPopup("ğŸŸ¤ Laterite Soil (Western & Eastern Ghats)")
  .addTo(soilTypes);

var overlays = {
  "ğŸŒŠ Rivers": rivers,
  "ğŸŒ± Biosphere Reserves": biospheres,
  "ğŸ¦Œ Protected Areas / Sanctuaries": protectedAreas,
  "ğŸŒ Climate Zones": climateZones,
  "ğŸŒ± Soil Types": soilTypes
};

//  L.control.layers(null, overlays).addTo(map);
      // -------- SEARCH CONTROL --------

  L.Control.geocoder({
    defaultMarkGeocode: true,
    position: 'topleft',
    placeholder: 'Search country / city / place'
  }).addTo(map);


      // -------- LEGEND (LEAFLET CONTROL) --------

  var legend = L.control({ position: 'bottomright' });

  legend.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'info legend');
    div.style.background = 'white';
    div.style.padding = '10px';
    div.style.borderRadius = '6px';
    div.style.boxShadow = '0 0 6px rgba(0,0,0,0.3)';
    div.style.fontSize = '13px';

    div.innerHTML += '<strong>Legend</strong><br>';
    div.innerHTML += 'ğŸŒŠ Rivers<br>';
    div.innerHTML += 'ğŸŒ± Biosphere Reserves<br>';
    div.innerHTML += 'ğŸ¦Œ Protected Areas<br>';
    div.innerHTML += 'ğŸŒ Climate Zones<br>';
    div.innerHTML += 'ğŸŒ± Soil Types<br>';
    div.innerHTML += 'ğŸŒ Countries<br>';

div.innerHTML += '<hr>';
div.innerHTML += '<strong>ğŸŒ¦ï¸ KÃ¶ppen Climate</strong><br>';
div.innerHTML += 'A â€“ Tropical<br>';
div.innerHTML += 'B â€“ Dry<br>';
div.innerHTML += 'C â€“ Temperate<br>';
div.innerHTML += 'D â€“ Continental<br>';
div.innerHTML += 'E â€“ Polar<br>';







    

    return div;
  };

  legend.addTo(map);
   // -------- SIDE PANEL TOGGLE (CORRECT LOGIC) --------

function bindToggle(checkboxId, layer) {
  const checkbox = document.getElementById(checkboxId);
  checkbox.addEventListener('change', function () {
    if (this.checked) {
      map.addLayer(layer);
    } else {
      map.removeLayer(layer);
    }
  });
}

// Bind to EXISTING layers
bindToggle('chkRivers', rivers);
bindToggle('chkBiosphere', biospheres);
bindToggle('chkProtected', protectedAreas);
bindToggle('chkClimate', climateZones);
bindToggle('chkSoil', soilTypes);
bindToggle('chkCountries', countries);

bindToggle('chkKoppen', koppenClimate);

    

const panel = document.getElementById('sidePanel');
const btn = document.getElementById('layerToggleBtn');

btn.addEventListener('click', () => {
  panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
});


</script>

  
</body>
</html>
