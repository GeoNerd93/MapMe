<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>MapMe ‚Äì World Atlas</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <link
  rel="stylesheet"
  href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"
/>


  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    header {
      padding: 15px;
      background: #1f3a8a;
      color: white;
      text-align: center;
    }
    #map {
      height: 85vh;
      width: 100%;
    }
    footer {
      text-align: center;
      padding: 8px;
      font-size: 14px;
      background: #f1f1f1;
    }

#sidePanel {
  position: fixed;
  top: 140px;
  right: 10px;
  width: 220px;
  background: white;
  padding: 12px 14px;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  font-size: 14px;
  z-index: 1000;
  display: none;
}

#sidePanel h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  text-align: center;
  border-bottom: 1px solid #ddd;
  padding-bottom: 6px;
}

.layer-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.layer-item input {
  transform: scale(1.1);
  cursor: pointer;
}

.layer-item span {
  white-space: nowrap;
}
  #layerToggleBtn {
  position: fixed;
  top: 140px;
  right: 10px;
  background: #1f3a8a;
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  z-index: 1001;
}


  </style>
</head>

<body>

<header>
  <h1>üåç MapMe ‚Äì Interactive World Atlas</h1>
  <p>Pan ‚Ä¢ Zoom ‚Ä¢ Explore the World</p>
</header>

<div id="map"></div>

  <div id="layerToggleBtn">üß≠ Layers</div>


 <div id="sidePanel">
  <h3>Layers</h3>

<div class="layer-item">
  <input type="checkbox" id="chkCountries">
  <span>üåç Countries</span>
</div>


  <div class="layer-item">
    <input type="checkbox" id="chkRivers">
    <span>üåä Rivers</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkBiosphere">
    <span>üå± Biosphere</span>
  </div>

  <div class="layer-item">
    <input type="checkbox" id="chkProtected">
    <span>ü¶å Protected Areas</span>
  </div>


  <div class="layer-item">
    <input type="checkbox" id="chkSoil">
    <span>üå± Soil Types</span>
  </div>

<div class="layer-item">
  <input type="checkbox" id="chkKoppenMajor">
  <span>üå¶Ô∏è K√∂ppen Major Zones</span>
</div>

<div class="layer-item">
  <input type="checkbox" id="chkKoppenSub">
  <span>üå¶Ô∏è K√∂ppen Sub-Zones</span>
</div>


</div>

<footer>
  OpenStreetMap data | Leaflet.js | MapMe
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
 <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
 

<!--<script>
  // Create the map
  var map = L.map('map').setView([20, 0], 2);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);
</script>-->

  <script>
  // Create the map
  var map = L.map('map').setView([20, 0], 2);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);

  // -------- RIVERS LAYER --------

  // -------- RIVERS LAYER (NATURAL EARTH) --------

var rivers = L.geoJSON(null, {
  style: {
    color: 'blue',
    weight: 1.5
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup("üåä River: " + feature.properties.name);
    }
  }
}).addTo(map);

fetch('data/ne_50m_rivers.geojson')
  .then(response => response.json())
  .then(data => {
    rivers.addData(data);
  })
  .catch(err => console.error("Failed to load rivers:", err));


  
  // Layer control

    // -------- COUNTRIES LAYER (NATURAL EARTH) --------

var countries = L.geoJSON(null, {
  style: {
    color: '#6b7280',
    weight: 1,
    fillColor: '#e5e7eb',
    fillOpacity: 0.2
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.ADMIN) {
      layer.bindPopup("üåç Country: " + feature.properties.ADMIN);
    }
  }
}).addTo(map);

fetch('data/ne_50m_countries.geojson')
  .then(res => res.json())
  .then(data => countries.addData(data))
  .catch(err => console.error("Failed to load countries:", err));

     // Layer control

      // -------- BIOSPHERE RESERVES LAYER --------
// -------- BIOSPHERE RESERVES (UNESCO) --------

// -------- BIOSPHERE RESERVES (UNESCO) --------

var biospheres = L.geoJSON(null, {
  pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, {
      radius: 6,
      fillColor: '#22c55e',
      color: '#166534',
      weight: 1,
      fillOpacity: 0.8
    });
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup(
        "üå± Biosphere Reserve<br><strong>" +
        feature.properties.name +
        "</strong>"
      );
    }
  }
}).addTo(map);

fetch('data/ne_10m_biosphere.geojson')
  .then(res => res.json())
  .then(data => biospheres.addData(data))
  .catch(err => console.error("Failed to load biospheres:", err));


     // Layer control


      // -------- PROTECTED AREAS / SANCTUARIES --------

 // -------- PROTECTED AREAS (GLOBAL POINTS ‚Äì NATURAL EARTH) --------

var protectedAreas = L.geoJSON(null, {
  pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, {
      radius: 4,
      fillColor: '#16a34a',
      color: '#064e3b',
      weight: 1,
      fillOpacity: 0.75
    });
  },
  onEachFeature: function (feature, layer) {
    if (feature.properties && feature.properties.name) {
      layer.bindPopup(
        "ü¶å Protected Area<br><strong>" +
        feature.properties.name +
        "</strong>"
      );
    }
  }
}).addTo(map);

fetch('data/ne_10m_protected_areas_points.geojson')
  .then(res => res.json())
  .then(data => protectedAreas.addData(data))
  .catch(err => console.error("Failed to load protected areas:", err));


         // Layer control

// -------- K√ñPPEN CLIMATE (MAJOR ZONES) --------

var koppenMajor = L.geoJSON(null, {
  style: function (feature) {
    const g = feature.properties.group;
    return {
      color: '#111827',
      weight: 0.5,
      fillColor:
        g === 'A' ? '#16a34a' :
        g === 'B' ? '#eab308' :
        g === 'C' ? '#22c55e' :
        g === 'D' ? '#3b82f6' :
        g === 'E' ? '#e5e7eb' :
        '#d1d5db',
      fillOpacity: 0.25
    };
  },
  onEachFeature: function (feature, layer) {
    layer.bindPopup(
      "üå¶Ô∏è K√∂ppen Major Zone<br><strong>" +
      feature.properties.name +
      "</strong>"
    );
  }
});

fetch('data/koppen_major_zones.geojson')
  .then(res => res.json())
  .then(data => koppenMajor.addData(data))
  .catch(err => console.error("K√∂ppen major load error:", err));

// Layer control


// -------- K√ñPPEN CLIMATE (SUB-TYPES ‚Äì UPSC) --------

var koppenClimate = L.geoJSON(null, {
  style: function (feature) {
    const c = feature.properties.code;
    return {
      color: '#374151',
      weight: 0.6,
      fillColor:
        c.startsWith('A') ? '#16a34a' :
        c.startsWith('B') ? '#eab308' :
        c.startsWith('C') ? '#22c55e' :
        c.startsWith('D') ? '#3b82f6' :
        c.startsWith('E') ? '#e5e7eb' :
        '#d1d5db',
      fillOpacity: 0.4
    };
  },
  onEachFeature: function (feature, layer) {
    layer.bindPopup(
      "üå¶Ô∏è K√∂ppen Climate<br><strong>" +
      feature.properties.code +
      " ‚Äì " +
      feature.properties.name +
      "</strong>"
    );
  }
});

fetch('data/koppen_subtypes_upsc.geojson')
  .then(res => res.json())
  .then(data => koppenClimate.addData(data))
  .catch(err => console.error("K√∂ppen subtype load error:", err));


// Layer control

// -------- GLOBAL SOIL TYPES (UPSC) --------

var soilTypes = L.geoJSON(null, {
  style: function (feature) {
    const t = feature.properties.type;
    return {
      color: '#422006',
      weight: 0.6,
      fillColor:
        t.includes('Alluvial') ? '#fde68a' :
        t.includes('Black') ? '#1f2937' :
        t.includes('Red') ? '#dc2626' :
        t.includes('Laterite') ? '#b45309' :
        t.includes('Desert') ? '#facc15' :
        t.includes('Tundra') ? '#e5e7eb' :
        '#d1d5db',
      fillOpacity: 0.45
    };
  },
  onEachFeature: function (feature, layer) {
    layer.bindPopup(
      "üå± Soil Type<br><strong>" +
      feature.properties.type +
      "</strong>"
    );
  }
});

fetch('data/global_soil_types_upsc.geojson')
  .then(res => res.json())
  .then(data => soilTypes.addData(data))
  .catch(err => console.error("Soil load error:", err));

// Layer control

//  L.control.layers(null, overlays).addTo(map);
      
// -------- SEARCH CONTROL --------

  L.Control.geocoder({
    defaultMarkGeocode: true,
    position: 'topleft',
    placeholder: 'Search country / city / place'
  }).addTo(map);


      // -------- LEGEND (LEAFLET CONTROL) --------

  var legend = L.control({ position: 'bottomright' });

  legend.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'info legend');
    div.style.background = 'white';
    div.style.padding = '10px';
    div.style.borderRadius = '6px';
    div.style.boxShadow = '0 0 6px rgba(0,0,0,0.3)';
    div.style.fontSize = '13px';

    div.innerHTML += '<strong>Legend</strong><br>';
    div.innerHTML += 'üåä Rivers<br>';
    div.innerHTML += 'üå± Biosphere Reserves<br>';
    div.innerHTML += 'ü¶å Protected Areas<br>';
    div.innerHTML += 'üåç Climate Zones<br>';
    div.innerHTML += 'üå± Soil Types<br>';
    div.innerHTML += 'üåç Countries<br>';

div.innerHTML += '<hr><strong>üå¶Ô∏è K√∂ppen Climate</strong><br>';
div.innerHTML += '<u>Major Zones</u><br>';
div.innerHTML += 'A ‚Äì Tropical<br>';
div.innerHTML += 'B ‚Äì Dry<br>';
div.innerHTML += 'C ‚Äì Temperate<br>';
div.innerHTML += 'D ‚Äì Continental<br>';
div.innerHTML += 'E ‚Äì Polar<br>';

div.innerHTML += '<br><u>Sub-Zones (examples)</u><br>';
div.innerHTML += 'Af ‚Äì Rainforest<br>';
div.innerHTML += 'Am ‚Äì Monsoon<br>';
div.innerHTML += 'Aw ‚Äì Savanna<br>';
div.innerHTML += 'BWh ‚Äì Hot Desert<br>';
div.innerHTML += 'Cwa ‚Äì Humid Subtropical<br>';
div.innerHTML += 'Dfc ‚Äì Subarctic<br>';
div.innerHTML += 'ET / EF ‚Äì Tundra / Icecap<br>';

div.innerHTML += '<hr><strong>üå± Soil Types</strong><br>';
div.innerHTML += 'Alluvial<br>';
div.innerHTML += 'Black (Regur)<br>';
div.innerHTML += 'Red<br>';
div.innerHTML += 'Laterite<br>';
div.innerHTML += 'Desert / Arid<br>';
div.innerHTML += 'Tundra / Polar<br>';


    return div;
  };

  legend.addTo(map);
   // -------- SIDE PANEL TOGGLE (CORRECT LOGIC) --------

function bindToggle(checkboxId, layer) {
  const checkbox = document.getElementById(checkboxId);
  checkbox.addEventListener('change', function () {
    if (this.checked) {
      map.addLayer(layer);
    } else {
      map.removeLayer(layer);
    }
  });
}

// Bind to EXISTING layers
bindToggle('chkRivers', rivers);
bindToggle('chkBiosphere', biospheres);
bindToggle('chkProtected', protectedAreas);
bindToggle('chkSoil', soilTypes);
bindToggle('chkCountries', countries);
bindToggle('chkKoppenMajor', koppenMajor);
bindToggle('chkKoppenSub', koppenClimate);
koppenClimate.bringToFront();


    

const panel = document.getElementById('sidePanel');
const btn = document.getElementById('layerToggleBtn');

btn.addEventListener('click', () => {
  panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
});


</script>

  
</body>
</html>
